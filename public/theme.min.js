function removeParam(t, e) {
    var a, n = e.split("?")[0],
        i = [],
        o = -1 !== e.indexOf("?") ? e.split("?")[1] : "";
    if ("" !== o) {
        i = o.split("&");
        for (var s = i.length - 1; s >= 0; s -= 1)(a = i[s].split("=")[0]) === t && i.splice(s, 1);
        i.length && (n = n + "?" + i.join("&"))
    }
    return n
}

function copyToClipboard(t) {
    var e = $("<input>");
    $("body").append(e);
    var a = $(t).text();
    e.val(a).select(), document.execCommand("copy"), $(t).text("Copied"), setTimeout(function() {
        $(t).text(a)
    }, 1e3), e.remove()
}

function copyCustSig() {
    var t = $("#cust-sig-text"),
        e = t.val();
    t.val(e).select(), document.execCommand("copy"), t.val("Copied"), setTimeout(function() {
        t.val(e), $("#cust-sig-popup").modal("hide")
    }, 1e3)
}
$(document).ready(function() {
    initiate_plugins();
    let t = $(".app-content").attr("data-page");
    t ? (t = t.split(" ").map(t => t.charAt(0).toUpperCase() + t.toLowerCase().slice(1)).join(" "), document.title = t) : document.title = "EliteConnect"
}), $("form").parsley();
var count_add_row = 1;

function modalLoad() {
    var t = $(".modal");

    function e(e) {
        t.modal("hide")
    }
    t.on("shown.bs.modal", function(a) {
        (el_overlay = document.createElement("span")).className = "dropdown-overlay", document.body.appendChild(el_overlay), t.attr("aria-hidden", !1), window.history.pushState("#pbModal", "EliteConnect", document.location + "#pbModal"), window.addEventListener("popstate", e, !1), setTimeout(function() {
            t.focus(), $("#debug").text(document.activeElement.id)
        }, 1)
    }), t.on("hidden.bs.modal", function(a) {
        $(".dropdown-overlay").remove(), t.attr("aria-hidden", !0), "#pbModal" === window.history.state && history.go(-1), window.removeEventListener("popstate", e)
    })
}

function signatureUpload() {
    var t, e = document.getElementById("sig-img-view"),
        a = document.getElementById("image"),
        n = document.getElementById("input"),
        i = $(".progress"),
        o = $(".progress-bar"),
        s = $("#stamp-modal");
    $('[data-toggle="tooltip"]').tooltip(), n.addEventListener("change", function(t) {
        var e, i, o = t.target.files,
            r = function(t) {
                n.value = "", a.src = t, s.modal("show")
            };
        o && o.length > 0 && (i = o[0], (e = new FileReader).onload = function(t) {
            r(e.result)
        }, e.readAsDataURL(i))
    }), s.on("shown.bs.modal", function() {
        t = new Cropper(a, {
            aspectRatio: 0,
            viewMode: 2,
            autoCropArea: 1
        })
    }).on("hidden.bs.modal", function() {
        t.destroy(), t = null
    }), document.getElementById("crop").addEventListener("click", function() {
        var a, n;
        s.modal("hide"), t && (n = t.getCroppedCanvas({
            width: 550,
            height: 550
        }), a = e.src, e.src = n.toDataURL(), i.show(), n.toBlob(function(t) {
            new FormData().append("sig", t, "image.jpg"), url = URL.createObjectURL(t);
            var n = new FileReader;
            n.readAsDataURL(t), n.onloadend = function() {
                var t = n.result;
                $.ajax({
                    url: "function/upload-sig",
                    dataType: "json",
                    method: "POST",
                    data: {
                        sig: t,
                        login: !0,
                        type: "2"
                    },
                    xhr: function() {
                        var t = new XMLHttpRequest;
                        return t.upload.onprogress = function(t) {
                            var e = "0",
                                a = "0%";
                            t.lengthComputable && (a = (e = Math.round(t.loaded / t.total * 100)) + "%", o.width(a).attr("aria-valuenow", e).text(a))
                        }, t
                    },
                    success: function(t) {
                        "true" === t.res ? Swal.fire(t.notif_title, t.notif_disc, t.notif_type) : Swal.fire("Oops", "Something want wrong", "warning")
                    },
                    error: function() {
                        e.src = a, $.notify({
                            title: "Please",
                            message: "Retry"
                        }, {
                            type: "warning"
                        })
                    },
                    complete: function() {
                        i.hide()
                    }
                })
            }
        }))
    })
}

function signaturePadMain() {
    var t = new SignaturePad(document.getElementById("signature-pad"), {
            backgroundColor: "rgba(255, 255, 255, 0)",
            penColor: "rgb(0, 0, 198)"
        }),
        e = document.getElementById("save"),
        a = document.getElementById("close");
    document.querySelector("canvas").getContext("2d"), e.addEventListener("click", function(e) {
        var a = t.toDataURL("image/png");
        $.ajax({
            url: "function/upload-sig",
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                sig: a,
                login: !0
            },
            success: function(e) {
                "true" === e.res ? (Swal.fire(e.notif_title, e.notif_disc, e.notif_type), $("#sig-img-view").attr("src", a), t.clear()) : Swal.fire("Oops", "Something want wrong", "warning")
            }
        })
    }), a.addEventListener("click", function(e) {
        t.clear()
    })
}

function animateScroll(t, e) {
    var a = $(t).get(0).scrollWidth,
        n = $(t).get(0).clientWidth;
    $(t).animate({
        scrollLeft: a - n
    }, {
        duration: e,
        complete: function() {
            t.animate({
                scrollLeft: 0
            }, {
                duration: e
            })
        }
    })
}

function initiate_plugins() {
    var t = window.location.href.replace(/[#?].*$/, "").split("/").pop().split("#")[0].split("?")[0];
    count_add_row = 1, $("form").parsley(), $(".payment-input").attr("step", "0.01"), $(".pageTitle").html($(".app-content").attr("data-page")).addClass("animate__fadeIn"), $(document).on("shown.bs.dropdown", function() {
        (el_overlay = document.createElement("span")).className = "dropdown-overlay", document.body.appendChild(el_overlay)
    }).on("hide.bs.dropdown", function() {
        $(".dropdown-overlay").remove()
    }), "dashboard" === String(t) && new Swiper(".mySwiper", {
        spaceBetween: 30,
        centeredSlides: !0,
        autoplay: {
            delay: 5e3,
            disableOnInteraction: !1
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: !0
        }
    }), "setting-quotation-theme" === String(t) && new Swiper(".scrollbar-swiper", {
        preloadImages: !1,
        lazy: !0,
        scrollbar: {
            el: ".swiper-scrollbar",
            hide: !1
        },
        freeMode: !0,
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev"
        },
        breakpoints: {
            320: {
                slidesPerView: 1.7,
                spaceBetween: 10
            },
            480: {
                slidesPerView: 2.2,
                spaceBetween: 10
            },
            640: {
                slidesPerView: 2.7,
                spaceBetween: 10
            },
            768: {
                slidesPerView: 3.5,
                spaceBetween: 10
            },
            1024: {
                slidesPerView: 4.2,
                spaceBetween: 10
            },
            1280: {
                slidesPerView: 4.2,
                spaceBetween: 10
            },
            1440: {
                slidesPerView: 5.2,
                spaceBetween: 10
            }
        }
    })
}

function submitForm() {
    var t = $("#filecount").val(),
        e = $("#file");
    if (t <= 1) return (data = new FormData).append("company_logo", $("#file")[0].files[0]), $.ajax({
        url: "uploadlogo",
        type: "POST",
        data: data,
        cache: !1,
        dataType: "json",
        enctype: "multipart/form-data",
        processData: !1,
        contentType: !1
    }).done(function(t) {
        $(".company_logo_profile").attr("src", t.src), $("#file").val("");
        var e = t.notif_type,
            a = t.notif_title,
            n = t.notif_desc;
        $.notify({
            title: a,
            message: n
        }, {
            type: e
        })
    }), !1;
    e.replaceWith(e = e.clone(!0)), $.notify({
        title: "Sorry",
        message: "You can not upload more than 1 Photos"
    }, {
        type: "warning"
    }), $("#file").val("")
}

function setupIAS() {
    jQuery.ias("destroy"), jQuery.ias({
        container: "#content_new",
        item: ".items_new",
        pagination: ".nav_new",
        next: ".nav_new a"
    }).extension(new IASSpinnerExtension({
        html: '<div class="tbl_row text-center"><div class="tbl_cell dummycell pb-2 pt-2"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell">&nbsp;</div><div class="tbl_cell dummycell"></div><div class="tbl_cell colspan"><div class="spinner-border text-primary" role="status"></div></div>'
    })).extension(new IASTriggerExtension({
        text: "Click Here To Load More Data",
        html: '<div class="tbl_row text-center"><div class="tbl_cell dummycell pb-2 pt-2"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell">&nbsp;</div><div class="tbl_cell dummycell"></div><div class=" tbl_cell colspan" style="cursor: pointer;"><a class="btn btn-sm btn-a">{text}</a></div>',
        offset: 1e3
    })).extension(new IASNoneLeftExtension({
        html: '<div class="tbl_row text-center"><div class="tbl_cell dummycell pb-2 pt-2"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell"></div><div class="tbl_cell dummycell">&nbsp;</div><div class="tbl_cell dummycell"></div><div class="tbl_cell colspan">There are no more data left to load</div></div>'
    }))
}
$(document).on("click", "#add-row", function() {
    var t = $("#item_description").val(),
        e = $("#box_num").val(),
        a = $("#qty").val(),
        n = $("#value_rupee").val(),
        i = $("#remark").val(),
        o = a;
    if (("" === a || "0" === a) && (o = "1"), "" !== t) {
        var s = '<div class="row ml-0 mr-0 pt-50 pb-50 border-top border-bottom text-left append-item"><div class="col-10 col-md-6"><small><span class="sr_no">' + count_add_row + '</span>. ) Item / Particulars : <b class="item_description">' + t + "</b><br>Box No.: <b>" + e + "</b> | Qty.: <b>" + o + "</b> | Value (Rupees): <b>" + n + "</b><br>Remark:<b>" + i + '</b></small><input type="hidden" name="item_description[]" value="' + t + '"><input type="hidden" name="box_num[]" value="' + e + '"><input type="hidden" name="qty[]" value="' + o + '"><input type="hidden" name="value_rupee[]" value="' + n + '"><input type="hidden" name="remark[]" value="' + i + '"></div><div class="col-2"><a href="javascript:void(0)" class="remove" ><i class="badge-circle badge-circle-danger bx bx-trash font-medium-1"></i></a></div></div>';
        $("#append-item").after(s), $("#item_description, #value_rupee, #remark").val(""), $("#qty").val("1"), $("#weight_label").val("KG"), e > 0 && $("#box_num").val(Number(e) + Number(1)), count_add_row++
    } else $("#item_description_alert").removeClass("hidden"), $("#item_description").focus()
}).on("click", "#add-row-edit", function() {
    var t = $("#item_description").val(),
        e = $("#box_num").val(),
        a = $("#qty").val(),
        n = $("#value_rupee").val(),
        i = $("#remark").val(),
        o = a;
    if (("" === a || "0" === a) && (o = "1"), "" !== t) {
        var s = '<div class="row ml-0 mr-0 pt-50 pb-50 border-top border-bottom text-left append-item"><div class="col-10 col-md-6"><small><span class="sr_no">' + count_add_row + '</span>. ) Item / Particulars : <b class="item_description">' + t + "</b><br>Box No.: <b>" + e + "</b> | Qty.: <b>" + o + "</b> | Value (Rupees): <b>" + n + "</b><br>Remark:<b>" + i + '</b></small><input type="hidden" name="item_description[]" value="' + t + '"><input type="hidden" name="box_num[]" value="' + e + '"><input type="hidden" name="qty[]" value="' + o + '"><input type="hidden" name="value_rupee[]" value="' + n + '"><input type="hidden" name="remark[]" value="' + i + '"><input type="hidden" name="delete[]" value="false"><input type="hidden" name="edit[]" value="false_edit"></div><div class="col-2"><a href="javascript:void(0)" class="remove"><i class="badge-circle badge-circle-danger bx bx-trash font-medium-1"></i></a></div></div>';
        $("#append-item").after(s), $("#item_description, #value_rupee, #remark").val(""), $("#qty").val("1"), $("#weight_label").val("KG"), e > 0 && $("#box_num").val(Number(e) + Number(1)), count_add_row++
    } else $("#item_description_alert").removeClass("hidden"), $("#item_description").focus()
}).on("click", ".remove-edit", function() {
    $(this);
    var t = $(this).closest(".row"),
        e = $(this).closest(".remove-hide"),
        a = t.find(".item_description").val(),
        n = t.find(".delete_gr");
    Swal.fire({
        title: "Are you sure?",
        html: "You want to remove <b class='text-danger text-bold-700'>" + a + "</b>.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: "Delete",
        cancelButtonText: "Cancel",
        confirmButtonClass: "btn btn-danger",
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(a) {
        a.value && (n.val("true"), t.addClass("bg-danger"), t.append('<div class="text-center bg-danger text-white col-12 border-top text-remove"><small>Add for Removed This Item / Particular</small></div>'), e.html('<a href="javascript:void(0)" class="remove-undo"><i class="badge-circle badge-circle-warning bx bx-undo font-medium-1"></i></a>'))
    })
}).on("click", ".remove-undo", function() {
    var t = $(this).closest(".row"),
        e = $(this).closest(".remove-hide");
    t.find(".delete_gr").val("false"), t.removeClass("bg-danger"), t.find(".text-remove").remove(), e.html('<a href="javascript:void(0)" class="remove-edit"><i class="badge-circle badge-circle-danger bx bx-trash font-medium-1"></i></a>')
}).on("click", "#add-row-assessment", function() {
    var t = $("#item_description").val(),
        e = $("#qty").val(),
        a = $("#value_rupee").val(),
        n = $("#remark").val(),
        i = e;
    if (("" === e || "0" === e) && (i = "1"), "" !== t) {
        var o = '<div class="row ml-0 mr-0 pt-50 pb-50 border-top border-bottom text-left append-item"><div class="col-10 col-md-6"><small><span class="sr_no">' + count_add_row + '</span>. ) Item / Particulars : <b class="item_description">' + t + "</b><br>Qty.: <b>" + i + "</b> | Value (Rupees): <b>" + a + "</b><br>Remark:<b>" + n + '</b></small><input type="hidden" name="item_description[]" value="' + t + '"><input type="hidden" name="qty[]" value="' + i + '"><input type="hidden" name="value_rupee[]" value="' + a + '"><input type="hidden" name="remark[]" value="' + n + '"></div><div class="col-2"><a href="javascript:void(0)" class="remove"><i class="badge-circle badge-circle-danger bx bx-trash font-medium-1"></i></a></div></div>';
        $("#append-item").after(o), $("#item_description, #value_rupee, #remark").val(""), $("#qty").val("1"), $("#weight_label").val("KG"), count_add_row++
    } else $("#item_description_alert").removeClass("hidden"), $("#item_description").focus()
}).on("click", "#add-row-edit-assessment", function() {
    var t = $("#item_description").val(),
        e = $("#qty").val(),
        a = $("#value_rupee").val(),
        n = $("#remark").val(),
        i = e;
    if (("" === e || "0" === e) && (i = "1"), "" !== t) {
        var o = '<div class="row ml-0 mr-0 pt-50 pb-50 border-top border-bottom text-left append-item"><div class="col-10 col-md-6"><small><span class="sr_no">' + count_add_row + '</span>. ) Item / Particulars : <b class="item_description">' + t + "</b><br> Qty.: <b>" + i + "</b> | Value (Rupees): <b>" + a + "</b><br>Remark:<b>" + n + '</b></small><input type="hidden" name="item_description[]" value="' + t + '"><input type="hidden" name="qty[]" value="' + i + '"><input type="hidden" name="value_rupee[]" value="' + a + '"><input type="hidden" name="remark[]" value="' + n + '"><input type="hidden" name="delete[]" value="false"><input type="hidden" name="edit[]" value="false_edit"></div><div class="col-2"><a href="javascript:void(0)" class="remove"><i class="badge-circle badge-circle-danger bx bx-trash font-medium-1"></i></a></div></div>';
        $("#append-item").after(o), $("#item_description, #value_rupee, #remark").val(""), $("#qty").val("1"), $("#weight_label").val("KG"), count_add_row++
    } else $("#item_description_alert").removeClass("hidden"), $("#item_description").focus()
}).on("keyup", "#item_description", function() {
    $.ajax({
        type: "POST",
        url: "../function/item-list",
        data: "keyword=" + $(this).val(),
        success: function(t) {
            $("#js-list-items").html(t).show()
        }
    });
    var t = $("#item_description"),
        e = $("#item_description_alert");
    e.hasClass("hidden") ? t.focus() : "" !== t.val() ? e.addClass("hidden") : t.focus()
}).on("click", ".clear-selection", function() {
    $("#js-list-items").hide().html("")
}).on("click", ".item-list", function() {
    $("#item_description").val($(this).text()), $("#js-list-items").hide().html("")
}).on("click", "#s_btn", function() {
    var t = $("#s_key").val(),
        e = $("#s_type").val(),
        a = Ladda.create(document.querySelector("#s_btn"));
    a.start();
    var n = window.location.href,
        i = -1 !== n.indexOf("?");
    "1" !== e && (n = e + "-list");
    var o = removeParam("search_key", n);
    setTimeout(function() {
        a.stop()
    }, 2500), $(".app-content").addClass("fadeOut animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", function() {
        $(this).removeClass("fadeOut animated")
    }), window.location.href = o + (i ? "&search_key=" + t : "?search_key=" + t)
}).on("keyup", "#s_key", function(t) {
    13 === t.keyCode && $("#s_btn").click()
}).on("click", "#filters", function() {
    (el_overlay = document.createElement("div")).className = "main-overlay", el_overlay.id = "filter-overlay", document.body.appendChild(el_overlay), $("#filter_div").hasClass("animate__fadeOutUp") ? ($("#filter_div").removeClass("animate__fadeOutUp d-none").addClass("animate__fadeInDown"), $("#s_key").focus()) : $("#filter_div").removeClass("animate__fadeOutDown d-none").addClass("animate__fadeInUp"), $("body").addClass("noscroll")
}).on("click", "#search_icon", function() {
    (el_overlay = document.createElement("div")).className = "main-overlay", el_overlay.id = "filter-overlay", document.body.appendChild(el_overlay), $("#search_div").hasClass("animate__fadeOutUp") ? ($("#search_div").removeClass("animate__fadeOutUp d-none").addClass("animate__fadeInDown"), $("#s_key").focus()) : $("#search_div").removeClass("animate__fadeOutDown d-none").addClass("animate__fadeInUp"), $("body").addClass("noscroll")
}).on("click", "#filter-overlay,.close_filter", function() {
    $("#filter-overlay").remove(), $("body").removeClass("noscroll"), $("#filter_div").hasClass("animate__fadeInDown") ? $("#filter_div").removeClass("animate__fadeInDown d-none").addClass("animate__fadeOutUp") : $("#filter_div").removeClass("animate__fadeInUp").addClass("animate__fadeOutDown"), $("#search_div").hasClass("animate__fadeInDown") ? $("#search_div").removeClass("animate__fadeInDown d-none").addClass("animate__fadeOutUp") : $("#search_div").removeClass("animate__fadeInUp").addClass("animate__fadeOutDown")
}).on("click", "#filter_btn", function() {
    var t = $(this).attr("id"),
        e = Ladda.create(document.querySelector("#" + t));
    e.start(), setTimeout(function() {
        e.stop()
    }, 3500), $("#filter_search").submit()
}).on("keyup", ".pb-cust-name", function() {
    $.ajax({
        type: "POST",
        url: "../function/customer-list",
        data: "keyword=" + $(this).val(),
        success: function(t) {
            $("#js-list-cust").html(t).show()
        }
    })
}).on("click", ".clear-selection", function() {
    $("#js-list-cust").hide().html("")
}).on("click", ".cust-list", function() {
    $(".pb-cust-name").val($(this).data("n")), $(".pb-cust-phone").val($(this).data("p")), $(".pb-cust-address").val($(this).data("ad")), $(".pb-cust-state").val($(this).data("s")), $(".pb-cust-city").val($(this).data("c")), $(".pb-cust-pincode").val($(this).data("pc")), $(".pb-cust-email").val($(this).data("e")), $("#js-list-cust").hide().html("")
}).on("click", "#consignor_as_billing", function() {
    $(this).is(":checked") ? $("#consignee_details").find(":input").attr("readonly", "readonly") : $("#consignee_details").find(":input").removeAttr("readonly")
}).on("click", "#upibtn", function() {
    copyToClipboard("#upiid")
}).on("click", "#paybtn", function() {
    copyToClipboard("#pay")
}).on("click", "#pbidbtn", function() {
    copyToClipboard("#pbid")
}).on("click", "#cust-sig-text", function() {
    copyCustSig()
}).on("click", "#copy-cust-sig", function() {
    copyCustSig()
}).on("click", ".cust-signature", function() {
    var t = $(this).data("wa"),
        e = $(this).data("title"),
        a = t.replace("https://wa.me/", "https://wa.me/91"),
        n = $(this).data("sigtext");
    e ? $("#sig-pad-modal").text(e) : $("#sig-pad-modal").text("Customer Signature"), $("#cust-sig-text").val(n), $("#cust-sig-whatsapp").attr("href", a), $("#cust-sig-popup").modal("show")
}).on("change", ".options_select", function(t) {
    var e = $(this),
        a = e.closest(".options_row").find(".options_input"),
        n = t.target.options[t.target.selectedIndex].dataset.r,
        i = !0;
    "false" === n && (i = !1), n ? a.attr("readonly", i) : "1" === e.val() ? a.attr("readonly", !0) : "2" === e.val() ? a.attr("readonly", !1) : (e.val(), a.attr("readonly", i))
}).on("change", "#gst_in_out", function() {
    var t = $(this);
    "2" === t.val() ? ($("#gst_percent").attr("readonly", !0), $("#gst_type").attr("readonly", !0)) : "1" === t.val() ? ($("#gst_percent").attr("readonly", !1), $("#gst_type").attr("readonly", !1)) : "3" === t.val() && ($("#gst_percent").attr("readonly", !0), $("#gst_type").attr("readonly", !0))
}).on("change", "#payment_mode", function() {
    var t = $(this),
        e = $("#paymode_number");
    "Cash" === t.val() ? e.attr("readonly", !0) : e.attr("readonly", !1)
}).on("change", "#insurance_type", function() {
    var t = $(this);
    "1" === t.val() ? ($("#insurance_percent").attr("readonly", !0), $("#dec_val_of_goods").attr("readonly", !0)) : "2" === t.val() ? ($("#insurance_percent").attr("readonly", !1), $("#dec_val_of_goods").attr("readonly", !1)) : "3" === t.val() && ($("#insurance_percent").attr("readonly", !0), $("#dec_val_of_goods").attr("readonly", !0))
}).on("click", ".remove", function() {
    var t = $(this).closest(".row"),
        e = t.find(".item_description").text();
    Swal.fire({
        title: "Are you sure?",
        html: "You want to remove <b class='text-danger text-bold-700'>" + e + "</b>.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: "Delete",
        cancelButtonText: "Cancel",
        confirmButtonClass: "btn btn-danger",
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(e) {
        e.value && (t.html('<div class="text-center bg-danger text-white col-12"><small>Removed This Item / Particular</small></div>'), count_add_row--, $(".row span.sr_no").html(function(t) {
            return $(".row span.sr_no").length - t
        }))
    })
}).on("focus", ".payment-input", function() {
    "0" === $(this).val() && $(this).select()
}).on("keyup focusin", ".payment-input", function() {
    var t = parseInt($("#freight_charge").val()) || 0,
        e = parseInt($("#packing_charge").val()) || 0,
        a = parseInt($("#un_packing_charge").val()) || 0,
        n = parseInt($("#loading_charge").val()) || 0,
        i = parseInt($("#un_loading_charge").val()) || 0,
        o = parseInt($("#packing_material_charge").val()) || 0,
        s = parseInt($("#storage_charge").val()) || 0,
        r = parseInt($("#car_tpt").val()) || 0,
        c = parseInt($("#miscellaneous_charge").val()) || 0,
        d = parseInt($("#other_charges").val()) || 0,
        u = parseInt($("#st_charge").val()) || 0,
        p = parseInt($("#green_tax").val()) || 0,
        m = parseInt($("#qt_in_1").val()) || 0,
        f = parseInt($("#qt_in_2").val()) || 0,
        v = parseInt($("#qt_in_3").val()) || 0,
        h = parseInt($("#qt_in_4").val()) || 0,
        b = parseInt($("#qt_in_5").val()) || 0,
        g = parseInt($("#discount").val()) || 0;
    $("#get-subtotal").text("Sub Total: " + (t + e + a + n + i + o + s + r + c + d + u + p + m + f + v + h + b - g))
}).on("click", ".goBack", function() {
    history.go(-1)
}).on("click", ".pb_account_switch", function(t) {
    $.notify({
        title: "Please wait..",
        message: "Your account is switching"
    }, {
        type: "info"
    }), $(".pb_account_switch.active").removeClass("active"), $(this).addClass("active"), $(this).parent().parent().find(".app-file-folder-logo").removeClass("bg-gradiant-blue-purpule").addClass("badge-circle-light-pb"), $(this).parent().parent().find(".bx").removeClass("bx-check").addClass("bx-right-arrow-alt"), $(this).find(".app-file-folder-logo").removeClass("badge-circle-light-pb").addClass("bg-gradiant-blue-purpule"), $(this).find(".bx").removeClass("bx-right-arrow-alt").addClass("bx-check");
    var e = $(this).data("switch-user"),
        a = $(this).data("switch-details");
    setTimeout(function() {
        $.ajax({
            url: "fun/switch",
            method: "post",
            data: {
                t: "open",
                user: e,
                details: a
            },
            cache: !1,
            dataType: "json",
            success: function(t) {
                var e = t.notif_type,
                    a = t.notif_title,
                    n = t.notif_desc;
                $.notify({
                    title: a,
                    message: n
                }, {
                    type: e
                });
                var i = t.goTo;
                "true" === t.res && (location.href = i)
            },
            error: function(t, e) {
                var a = "";
                a = 0 === t.status ? "Network Problem" : 404 === t.status ? "404 error" : 500 === t.status ? "505 error" : "parsererror" === e ? "Data Error" : "timeout" === e ? "Network Problem - Timeout" : "abort" === e ? "Invalid Data Entery" : "oops something want wrong", l.stop(), $.notify({
                    title: "(Please Retry) - ",
                    message: a
                }, {
                    type: "warning"
                })
            }
        })
    }, 1e3)
}).on("click", ".lr-save-btn", function() {
    var t = $(this),
        e = t.attr("id"),
        a = $("#modal-lr"),
        n = t.data("at"),
        i = t.data("mdl-title"),
        o = t.data("lr-num"),
        s = $("#share-driver"),
        r = $("#share-consignee"),
        c = $("#share-consignor"),
        d = $("#share-transporter"),
        u = s.attr("href"),
        p = r.attr("href"),
        m = c.attr("href"),
        f = d.attr("href");
    let v = t.data("doc");
    a.modal("show");
    var h = Ladda.create(document.querySelector("#" + e));
    h.start(), $(".lr-btn-title").text(i), $("#lr-number-modal").text("#" + o), "viewFile" === n && (s.attr("target", "_blank"), c.attr("target", "_blank"), r.attr("target", "_blank"), d.attr("target", "_blank")), s.attr("href", "pdf/lr_pdf_save?at=" + n + "&doc=" + v + "&" + u), c.attr("href", "pdf/lr_pdf_save?at=" + n + "&doc=" + v + "&" + m), r.attr("href", "pdf/lr_pdf_save?at=" + n + "&doc=" + v + "&" + p), d.attr("href", "pdf/lr_pdf_save?at=" + n + "&doc=" + v + "&" + f), a.on("hidden.bs.modal", function(t) {
        s.attr("href", ""), c.attr("href", ""), r.attr("href", ""), d.attr("href", ""), h.stop()
    })
}).on("submit", "form.data-form", function(t) {
    t.preventDefault();
    var e = $(this).attr("action"),
        a = new FormData(this);
    if ($(this).parsley().isValid()) {
        var n = Ladda.create(document.querySelector(".submit-btn"));
        n.start(), $.ajax({
            type: "POST",
            url: e,
            data: a,
            cache: !1,
            dataType: "json",
            enctype: "multipart/form-data",
            processData: !1,
            contentType: !1,
            success: function(t) {
                count_add_row = 1, setTimeout(function() {
                    n.stop()
                }, 2500);
                var e = "",
                    a = t.notif_type,
                    i = t.notif_title,
                    o = t.notif_desc;
                $.notify({
                    title: i,
                    message: o
                }, {
                    type: a
                }), e = t.goTo, "true" === t.res && "" !== e && window.setTimeout(function() {
                    "469bba0a564235dfceede42db14f17b0" === e ? history.go(-1) : window.location.href = e
                }, 1e3)
            },
            error: function(t, e) {
                var a = "";
                a = 0 === t.status ? "Network Problem" : 404 === t.status ? "404 error" : 500 === t.status ? "505 error" : "parsererror" === e ? "Data Error" : "timeout" === e ? "Network Problem - Timeout" : "abort" === e ? "Invalid Data Entery" : "oops something want wrong", n.stop(), $.notify({
                    title: "(Please Retry) - ",
                    message: a
                }, {
                    type: "warning"
                })
            }
        })
    }
}).on("click", ".notif_pending", function(t) {
    var e = $(this).data("notif");
    $.ajax({
        type: "POST",
        url: "function/notification",
        data: {
            notif: e
        },
        cache: !1,
        dataType: "json",
        success: function(t) {
            var e = t.goTo;
            "true" === t.res && (window.location.href = e)
        }
    })
}).on("click", "#logout", function(t) {
    $.notify({
        title: "Please wait...",
        message: "Ready to logout"
    }, {
        type: "danger"
    }), setTimeout(function() {
        $.ajax({
            type: "POST",
            url: "logout",
            data: {
                logout: "true"
            },
            success: function(t) {
                var e = "";
                $.notify({
                    title: "Logout",
                    message: "Successfully"
                }, {
                    type: "success"
                }), e = "index", window.location.href = e
            },
            error: function(t, e) {
                var a = "";
                a = 0 === t.status ? "Network Problem" : 404 === t.status ? "404 error" : 500 === t.status ? "505 error" : "parsererror" === e ? "Data Error" : "timeout" === e ? "Network Problem - Timeout" : "abort" === e ? "Invalid Data Entery" : "oops something want wrong", l.stop(), $.notify({
                    title: "(Please Retry) - ",
                    message: a
                }, {
                    type: "warning"
                })
            }
        })
    }, 1e3)
}).on("change", ".item-chechbox", function() {
    var t = $(this).attr("item-num-check");
    $(".item-chechbox[item-grp='vehicles']").is(":checked") ? ($(".vehicles_details").removeAttr("disabled").addClass("bg-trans-dark text-semibold"), $("#vehicles_details_div").removeClass("hidden")) : ($(".vehicles_details").attr("disabled", "disabled").removeClass("bg-trans-dark text-semibold"), $("#vehicles_details_div").addClass("hidden")), $(this).is(":checked") ? ($(this).parent().parent().addClass("bg-rgba-info"), $("input[item-num-cf='" + t + "']").removeAttr("disabled"), $("input[item-num-inp='" + t + "']").removeAttr("disabled").addClass("bg-trans-dark text-semibold").val("1").focusout(function() {
        $(this).val() || ($("input[item-num-inp='" + t + "']").val(""), $("input[item-num-cf='" + t + "']").val(""))
    })) : ($(this).parent().parent().removeClass("bg-rgba-info"), $("input[item-num-inp='" + t + "']").attr("disabled", "disabled").removeClass("bg-trans-dark text-semibold").val(""), $("input[item-num-cf='" + t + "']").attr("disabled", "disabled"))
}).on("focusin", "input[item-num-inp]", function() {
    this.select()
}).on("click", "#shipping_as_billing", function() {
    $(this).is(":checked") ? ($("#shippingDetailBox").hide(300), $("#shipping_customer, #shipping_country, #shipping_address, #shipping_gstin, #shipping_state, #shipping_state_code, #shipping_city, #shipping_pincode").attr("disabled", "disabled")) : ($("#shippingDetailBox").show(300), $("#shipping_customer, #shipping_country, #shipping_address, #shipping_gstin, #shipping_state, #shipping_state_code, #shipping_city, #shipping_pincode").removeAttr("disabled", "disabled"))
}).on("change", "#insurance_y_n", function() {
    "Insured" === $(this).val() ? ($("#insurance_details_inputs").show(300), $("#ins_company, #ins_policy_no, #ins_date, #ins_amount, #ins_risk").removeAttr("disabled", "disabled")) : ($("#insurance_details_inputs").hide(300), $("#ins_company, #ins_policy_no, #ins_date, #ins_amount, #ins_risk").attr("disabled", "disabled"))
}).on("change", "#noc_type", function() {
    "car" === $(this).val() ? ($("#car_details_inputs").show(300), $("#noc_type_other").hide(300)) : "other" === $(this).val() ? ($("#noc_type_other").show(300), $("#car_details_inputs").hide(300)) : ($("#car_details_inputs").hide(300), $("#noc_type_other").hide(300))
}).on("change", ".item-chechbox", function() {
    var t = $(this).attr("item-num-check"),
        e = $("select[required-action='" + t + "']");
    $(this).is(":checked") ? (e.removeAttr("disabled"), $("input[item-num-sf='" + t + "']").removeAttr("disabled"), $("input[required-action='" + t + "']").focusout(function() {
        e.val() || $("input[item-num-sf='" + t + "']").val("required")
    })) : (e.attr("disabled", "disabled"), $("input[item-num-sf='" + t + "']").attr("disabled", "disabled"))
}).on("focusin", "input[required-action]", function() {
    this.select()
}).on("click", ".quotation-design-btn", function() {
    var t = $(this).attr("view-name"),
        e = $(this).attr("view-type");
    $.ajax({
        url: "function/change-quotation-design",
        method: "POST",
        dataType: "json",
        cache: !1,
        data: {
            view_name: t,
            view_type: e,
            send: "true"
        },
        success: function(t) {
            "true" === t.res ? (Swal.fire(t.notif_title, t.notif_disc, t.notif_type), window.setTimeout(function() {
                history.go(-1)
            }, 1e3)) : Swal.fire("Oops", "Something want wrong", "warning")
        }
    })
}).on("click", ".eliteconnect-export-btn", function() {
    var t = $(this),
        e = t.data("type"),
        a = $("#tkn").val(),
        n = "function/__export/" + e;
    setTimeout(function() {
        window.location.href = "" + n + "?t=" + e + "&tkn=" + a, (el_overlay = document.createElement("div")).className = "overlay", el_overlay.innerHTML = '<div class="overlay__inner"><div class="overlay__content"><span class="spinner"></span></div></div>', document.body.appendChild(el_overlay)
    }, 100), setTimeout(function() {
        t.attr("data-type", e), $(".overlay").remove()
    }, 5e3)
}).on("click", ".btn-pdf", function() {
    var t = $(this),
        e = t.attr("id"),
        a = t.attr("href");
    setTimeout(function() {
        t.attr("href", "javascript:void(0);")
    }, 100);
    var n = Ladda.create(document.querySelector("#" + e));
    n.start(), setTimeout(function() {
        t.attr("href", a), n.stop()
    }, 3e3)
}).on("click", ".dlt-btn", function() {
    var t = $(this),
        e = t.attr("data-dlt"),
        a = t.attr("data-for");
    Swal.fire({
        title: "Are you sure?",
        text: "You want to delete selected data.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: "Delete",
        cancelButtonText: "Cancel",
        confirmButtonClass: "btn btn-danger",
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(n) {
        n.value && $.ajax({
            url: "function/deleteDataOne",
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                deleteData: e,
                for: a
            },
            success: function(e) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type), "true" === e.res ? t.parent().parent().parent().html('<div class="bg-danger text-white col-12"><h4 class="text-white">DATA DELETED</h4></div>').parent().addClass("bg-danger") : Swal.fire("Oops", "Something want wrong", "warning")
            }
        })
    })
}).on("click", ".inv_paid", function() {
    var t = $(this),
        e = t.data("inv"),
        a = t.data("inv-for"),
        n = t.attr("inv-act"),
        i = "Paid",
        o = "btn-success";
    "Paid" === n && (i = "Unpaid", o = "btn-danger"), Swal.fire({
        title: "Are you sure?",
        text: "You want to mark as " + i + " selected data.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: "Mark As " + i,
        cancelButtonText: "Close",
        confirmButtonClass: "btn " + o,
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(i) {
        i.value ? $.ajax({
            url: "function/doc_mark",
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                markData: e,
                for: a
            },
            success: function(e) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type), "true" === e.res ? "Paid" === e.ua ? (t.attr("inv-act", "Paid"), t.parent().parent().css("background", "#eefded"), t.parent().parent().find(".switch-label").css("color", "#008000").text("SAVE AS PAID")) : (t.attr("inv-act", "Unpaid"), t.parent().parent().removeAttr("style"), t.parent().parent().find(".switch-label").removeAttr("style").text("MARK AS PAID")) : (Swal.fire("Oops", "Something want wrong", "warning"), t.prop("checked", !1))
            }
        }) : "Paid" === n ? t.prop("checked", !0) : t.prop("checked", !1)
    })
}).on("click", ".doc_mark", function() {
    var t = $(this),
        e = t.data("doc"),
        a = t.data("doc-for"),
        n = t.attr("doc-act"),
        i = t.attr("doc-name"),
        o = "Paid",
        s = "btn-success";
    "Paid" === n && (o = "Unpaid", s = "btn-danger"), Swal.fire({
        title: "Are you sure?",
        text: "You want to mark as " + o + " selected data.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: i + " " + o,
        cancelButtonText: "Close",
        confirmButtonClass: "btn " + s,
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(i) {
        i.value ? $.ajax({
            url: "function/doc_mark",
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                markData: e,
                for: a
            },
            success: function(e) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type), "true" === e.res ? "Paid" === e.ua ? (t.attr("doc-act", "Paid"), t.parent().parent().css("background", "#eefded"), t.parent().parent().find(".switch-label").css("color", "#008000").text(e.ul)) : (t.attr("doc-act", "Unpaid"), t.parent().parent().removeAttr("style"), t.parent().parent().find(".switch-label").removeAttr("style").text(e.ul)) : (Swal.fire("Oops", "Something want wrong", "warning"), t.prop("checked", !1))
            }
        }) : "Paid" === n ? t.prop("checked", !0) : t.prop("checked", !1)
    })
}).on("click", ".login_code_reload", function() {
    var t = $(this),
        e = $("#tkn").val(),
        a = t.attr("id"),
        n = Ladda.create(document.querySelector("#" + a));
    n.start(), setTimeout(function() {
        t.attr("id", "")
    }, 100), $.ajax({
        type: "POST",
        url: "function/sub_user/login_code",
        data: {
            id: a,
            tkn: e
        },
        cache: !1,
        dataType: "json",
        success: function(e) {
            setTimeout(function() {
                n.stop(), t.attr("id", a), $("#cd_" + a).text(e.code)
            }, 1e3)
        }
    })
}).on("click", ".checkbox-switcher", function() {
    var t = $(this),
        e = t.attr("data-read"),
        a = t.attr("data-title"),
        n = t.attr("data-text"),
        i = t.data("action"),
        o = t.data("alert-permission"),
        s = t.data("id"),
        r = t.data("for"),
        c = t.attr("data-details"),
        d = t.data("checkbox-for");
    let u = n.replace("{title}", a);
    !1 === o ? $.ajax({
        url: "function/" + i,
        method: "POST",
        dataType: "json",
        cache: !1,
        data: {
            markId: s,
            for: r,
            markData: c,
            chkboxFor: d
        },
        success: function(a) {
            var n = a.title;
            "true" === a.res ? (t.attr("data-title", n), t.prop("checked") ? $("#" + e).attr("readonly", !1) : t.prop("checked", !1) && $("#" + e).attr("readonly", !0)) : t.prop("checked") ? (t.prop("checked", !1), $("#" + e).attr("readonly", !1)) : t.prop("checked", !1) && (t.prop("checked", !0), $("#" + e).attr("readonly", !0))
        }
    }) : Swal.fire({
        title: "Are you sure?",
        text: u,
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: a,
        cancelButtonText: "Close",
        confirmButtonClass: "btn btn-success",
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(e) {
        e.value ? $.ajax({
            url: "function/" + i,
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                markId: s,
                for: r,
                markData: c,
                chkboxFor: d
            },
            success: function(e) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type);
                var a = e.title;
                "true" === e.res ? t.attr("data-title", a) : (Swal.fire("Oops", "Something want wrong", "warning"), t.prop("checked") ? t.prop("checked", !1) : t.prop("checked", !1) && t.prop("checked", !0))
            }
        }) : t.prop("checked") ? t.prop("checked", !1) : t.prop("checked", !1) && t.prop("checked", !0)
    })
}).on("focusout", ".form-input-title", function() {
    var t = $(this),
        e = t.data("action"),
        a = t.data("id"),
        n = t.data("for"),
        i = t.data("type"),
        o = t.val(),
        s = t.data("input-for");
    t.data("text") !== o && $.ajax({
        url: "function/" + e,
        method: "POST",
        dataType: "json",
        cache: !1,
        data: {
            markId: a,
            for: n,
            markData: o,
            inputFor: s,
            type: i
        },
        success: function(e) {
            "true" === e.res && t.attr("data-text", o)
        }
    })
}).on("click", ".staff_status", function() {
    var t = $(this),
        e = t.data("inv"),
        a = t.data("inv-for"),
        n = t.attr("inv-act"),
        i = "Active",
        o = "btn-success";
    "Activate" == n && (i = "Deactivate", o = "btn-danger"), Swal.fire({
        title: "Are you sure?",
        text: "You want to " + i + " this user account. After deactivate this account you are not able to re-activate this account.",
        type: "warning",
        showCancelButton: !0,
        confirmButtonColor: "#f44336",
        cancelButtonColor: "#5e5e5e",
        confirmButtonText: i + " Account",
        cancelButtonText: "Cancel",
        confirmButtonClass: "btn " + o,
        cancelButtonClass: "btn btn-dark ml-1",
        buttonsStyling: !1,
        allowOutsideClick: function() {
            Swal.isLoading()
        }
    }).then(function(i) {
        i.value ? $.ajax({
            url: "function/staff_act",
            method: "POST",
            dataType: "json",
            cache: !1,
            data: {
                markData: e,
                for: a
            },
            success: function(e) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type), "true" === e.res ? "Activate" === e.ua ? (t.attr("inv-act", "Activate"), t.parent().parent().css("background", "#eefded"), t.parent().parent().find(".switch-label").css("color", "#008000").text("Activate Account")) : (t.attr("inv-act", "Unpaid"), t.parent().parent().removeAttr("style"), t.parent().parent().find(".switch-label").removeAttr("style").text("ACCOUNT DEACTIVATED")) : (Swal.fire("Oops", "Something want wrong", "warning"), t.prop("checked", !1))
            }
        }) : "Activate" === n ? t.prop("checked", !0) : t.prop("checked", !1)
    })
}).on("click", ".qt-theme", function() {
    var t = $(this),
        e = t.data("theme"),
        a = t.data("mark");
    $.ajax({
        url: "function/settings/theme_color",
        method: "POST",
        dataType: "json",
        cache: !1,
        data: {
            markId: a,
            for: "qt",
            theme: e
        },
        success: function(e) {
            if ("true" === e.res) {
                let a = $(".qt-theme");
                a.removeClass("selected"), a.find(".selected_text").text("SELECT"), a.find(".selected_icon").removeClass("bx-check-double").addClass("bxs-magic-wand"), t.find(".icon").removeClass("bxs-magic-wand").addClass("bx-check-double selected_icon"), t.find(".qt_text").addClass("selected_text").text("SELECTED COLOR"), $(t).addClass("selected")
            }
        }
    })
}).on("click", ".qt-theme-default", function() {
    var t = $(this),
        e = t.data("theme"),
        a = t.data("mark");
    e && $.ajax({
        url: "function/settings/theme_design",
        method: "POST",
        dataType: "json",
        cache: !1,
        data: {
            markId: a,
            for: "qt",
            theme: e
        },
        success: function(e) {
            if ("true" === e.res) {
                Swal.fire(e.notif_title, e.notif_disc, e.notif_type);
                let a = $(".qt-theme-default");
                a.removeClass("selected"), t.parent().parent().parent().find(".selected_text").removeClass("selected_text").text(""), a.find(".selected_icon").removeClass("bx-check-double").addClass("bxs-magic-wand"), t.find(".icon").removeClass("bxs-magic-wand").addClass("bx-check-double selected_icon"), t.parent().parent().find(".qt_text").addClass("selected_text").text("(SELECTED)"), $(t).addClass("selected"), window.setTimeout(function() {
                    history.go(-1)
                }, 1e3)
            }
        }
    })
}).on("input", ".pb-cust-mobile, #consignee_phone, #consignor_phone,.pb-cust-phone", function() {
    var t = $(this).val().replace(/\D/g, "");
    t.length > 10 && t.startsWith("91") && (t = t.slice(2)), t.length > 10 && (t = t.slice(-10)), $(this).val(t)
}).on("paste", ".pb-cust-mobile, #consignee_phone, #consignor_phone,.pb-cust-phone", function(t) {
    t.preventDefault();
    var e = t.originalEvent.clipboardData.getData("text").replace(/\D/g, "");
    e.length > 10 && e.startsWith("91") && (e = e.slice(2)), e = e.slice(-10), $(this).val(e)
}), modalLoad(), setupIAS();